# Slam

## SLAM
-slam的定义：自动驾驶/无人驾驶/无人机/机器人感知中，即时/同时/同步 定位与建图算法(slam)通过传感器收集到的实时数据，对车辆的位置和姿态进行估计和优化，构建高精度的点云地图。一边估测下一时刻的位姿，一边动态构建并更新全局一致性地图.SLAM（Simultaneous Localization and Mapping）算法是一种用于无人机或移动机器人同时定位自身位置和构建环境地图的算法。
[最详细的解释什么是slam](https://b23.tv/0KTcZWF)

传感器：双目相机，rgbd深度相机，结构光，激光雷达，毫米波雷达等都是常用的传感器，用来采集数据

分类：按照传感器的不同，分为视觉slam和激光雷达slam

用*相机*作为传感器的slam是视觉slam，但视觉传感器易受光线和天气变化的影响。而激光雷达可以准确获取三维数据且对环境变化不敏感

单一传感器获取的信息少，误差大，因此多传感器耦合，精度大

即使在多传感器耦合下，随着车辆位移的增加，在建图的过程中，帧与帧之间的匹配也会积累位姿误差，最终导致地图出现漂移，

回环检测可以检测当前传感器数据和历史传感器数据之间是否构成回环，然后构建回环帧之间的约束关系，从而有效地降低相邻帧之间匹配所造成的累计误差

在静止状态下，激光雷达发出的激光是旋转一周形成一个完整闭合的圆。但车辆是不断运动的，车载雷达旋转一周需要时间，会导致雷达开始扫描的起点和终点不在一条直线上，会产生一定程度的不完整漂移，这就是点云畸变，

惯性测量单元主要测量载体的角旋转速度和加速度，通过积分运算得到载体的位姿状态

### 三维空间中的刚体运动

    三维空间中的刚体运动的描述方式：旋转矩阵，变换矩阵，四元数和欧拉角

    1，三维空间由三个互相垂直的轴组成，一个点在三维空间中由三个轴的坐标指定

    2，一个刚体，不光有位置，还有姿态。相机是三维空间中的刚体，位置就是在空间中的哪个地方，姿态是相机的朝向

    3，坐标系之间的变化，两个4，用四个数表示三维向量的做法称为齐次坐标，引入齐次坐标后，旋转和平移可以放到同一个矩阵中，称为变换矩阵

    5，对于变换矩阵T，左上角是旋转矩阵R，右侧是平移向量t，左下角为0向量，右下角为1

    6，用旋转向量来表示旋转，旋转可以用一个旋转轴和旋转角来表示，用一个向量的方向和旋转轴一致，向量长度等于旋转角大小

    7，旋转向量有三个量，且没有约束

    8，欧拉角和旋转向量具有奇异性
 
### 李群和李代数
#### 为啥引入李群
    1，一个刚体在三维空间中的运动由旋转和平移组成

    2，每一个三维参考系都有一组基底，世界坐标参考系中的向量a，经过一次旋转R和一次平移t后得到了a'。则a'＝Ra➕t ，t是平移向量

    3，可以用旋转矩阵和欧拉角和四元数描述同一个旋转。旋转矩阵相对直观，但是有9个量，过于冗余，所以引入了欧拉角，但欧拉角有万向锁的问题，因此引入了四元数，当四元数的第一项接近0的时候，剩下的三个分量会非常大，这个时候就会不稳定

    4，需要对下一时刻状态进行估计，会产生误差，需要使得误差最小。则对误差表达式进行求导：
     df(R➕ΔR)/ΔR

    因为旋转矩阵具有约束，即行列式为1且正交，因此两个旋转矩阵相加并不是一个旋转矩阵，因此这里不能对R求导，需要引入李代数来解决


